function SnowStorm(){function c(a,b){if(isNaN(b)){b=0}return Math.random()*a+b}function b(a){return parseInt(c(2),10)==1?a*-1:a}function a(){f.start(true)}this.flakesMax=64;this.flakesMaxActive=32;this.animationInterval=50;this.flakeBottom=null;this.targetElement=null;this.followMouse=false;this.snowColor="#99ccff";this.snowCharacter="•";this.snowStick=true;this.useMeltEffect=false;this.useTwinkleEffect=false;this.usePositionFixed=false;this.flakeLeftOffset=0;this.flakeRightOffset=0;this.flakeWidth=8;this.flakeHeight=8;this.vMaxX=5;this.vMaxY=4;this.zIndex=9999;var d=typeof window.attachEvent=="undefined"?function(a,b,c){return a.addEventListener(b,c,false)}:function(a,b,c){return a.attachEvent("on"+b,c)};var e=typeof window.attachEvent=="undefined"?function(a,b,c){return a.removeEventListener(b,c,false)}:function(a,b,c){return a.detachEvent("on"+b,c)};var f=this;var g=this;this.timers=[];this.flakes=[];this.disabled=false;this.active=false;var h=navigator.userAgent.match(/msie/i);var i=navigator.userAgent.match(/msie 6/i);var j=h&&(i||navigator.userAgent.match(/msie 5/i));var k=navigator.appVersion.match(/windows 98/i);var l=navigator.userAgent.match(/iphone/i);var m=h&&document.compatMode=="BackCompat";var n=m||i||l?true:false;var o=null;var p=null;var q=null;var r=null;var s=null;var t=null;var u=1;var v=2;var w=6;var x=false;var y=function(){try{document.createElement("div").style.opacity="0.5"}catch(a){return false}return true}();var z=document.createDocumentFragment();if(f.flakeLeftOffset===null){f.flakeLeftOffset=0}if(f.flakeRightOffset===null){f.flakeRightOffset=0}this.meltFrameCount=20;this.meltFrames=[];for(var A=0;A<this.meltFrameCount;A++){this.meltFrames.push(1-A/this.meltFrameCount)}this.randomizeWind=function(){s=b(c(f.vMaxX,.2));t=c(f.vMaxY,.2);if(this.flakes){for(var a=0;a<this.flakes.length;a++){if(this.flakes[a].active){this.flakes[a].setVelocities()}}}};this.scrollHandler=function(){r=f.flakeBottom?0:parseInt(window.scrollY||document.documentElement.scrollTop||document.body.scrollTop,10);if(isNaN(r)){r=0}if(!x&&!f.flakeBottom&&f.flakes){for(var a=f.flakes.length;a--;){if(f.flakes[a].active===0){f.flakes[a].stick()}}}};this.resizeHandler=function(){if(window.innerWidth||window.innerHeight){o=window.innerWidth-(!h?16:2)-f.flakeRightOffset;q=f.flakeBottom?f.flakeBottom:window.innerHeight}else{o=(document.documentElement.clientWidth||document.body.clientWidth||document.body.scrollWidth)-(!h?8:0)-f.flakeRightOffset;q=f.flakeBottom?f.flakeBottom:document.documentElement.clientHeight||document.body.clientHeight||document.body.scrollHeight}p=parseInt(o/2,10)};this.resizeHandlerAlt=function(){o=f.targetElement.offsetLeft+f.targetElement.offsetWidth-f.flakeRightOffset;q=f.flakeBottom?f.flakeBottom:f.targetElement.offsetTop+f.targetElement.offsetHeight;p=parseInt(o/2,10)};this.freeze=function(){if(!f.disabled){f.disabled=1}else{return false}for(var a=f.timers.length;a--;){clearInterval(f.timers[a])}};this.resume=function(){if(f.disabled){f.disabled=0}else{return false}f.timerInit()};this.toggleSnow=function(){if(!f.flakes.length){f.start()}else{f.active=!f.active;if(f.active){f.show();f.resume()}else{f.stop();f.freeze()}}};this.stop=function(){this.freeze();for(var a=this.flakes.length;a--;){this.flakes[a].o.style.display="none"}e(window,"scroll",f.scrollHandler);e(window,"resize",f.resizeHandler);if(!j){e(window,"blur",f.freeze);e(window,"focus",f.resume)}};this.show=function(){for(var a=this.flakes.length;a--;){this.flakes[a].o.style.display="block"}};this.SnowFlake=function(a,b,d,e){var f=this;var g=a;this.type=b;this.x=d||parseInt(c(o-20),10);this.y=!isNaN(e)?e:-c(q)-12;this.vX=null;this.vY=null;this.vAmpTypes=[1,1.2,1.4,1.6,1.8];this.vAmp=this.vAmpTypes[this.type];this.melting=false;this.meltFrameCount=g.meltFrameCount;this.meltFrames=g.meltFrames;this.meltFrame=0;this.twinkleFrame=0;this.active=1;this.fontSize=10+this.type/5*10;this.o=document.createElement("div");this.o.innerHTML=g.snowCharacter;this.o.style.color=g.snowColor;this.o.style.position=x?"fixed":"absolute";this.o.style.width=g.flakeWidth+"px";this.o.style.height=g.flakeHeight+"px";this.o.style.fontFamily="arial,verdana";this.o.style.overflow="hidden";this.o.style.fontWeight="normal";this.o.style.zIndex=g.zIndex;z.appendChild(this.o);this.refresh=function(){if(isNaN(f.x)||isNaN(f.y)){return false}f.o.style.left=f.x+"px";f.o.style.top=f.y+"px"};this.stick=function(){if(n||g.targetElement!=document.documentElement&&g.targetElement!=document.body){f.o.style.top=q+r-g.flakeHeight+"px"}else if(g.flakeBottom){f.o.style.top=g.flakeBottom+"px"}else{f.o.style.display="none";f.o.style.top="auto";f.o.style.bottom="0px";f.o.style.position="fixed";f.o.style.display="block"}};this.vCheck=function(){if(f.vX>=0&&f.vX<.2){f.vX=.2}else if(f.vX<0&&f.vX>-.2){f.vX=-.2}if(f.vY>=0&&f.vY<.2){f.vY=.2}};this.move=function(){var a=f.vX*u;f.x+=a;f.y+=f.vY*f.vAmp;if(f.x>=o||o-f.x<g.flakeWidth){f.x=0}else if(a<0&&f.x-g.flakeLeftOffset<0-g.flakeWidth){f.x=o-g.flakeWidth-1}f.refresh();var b=q+r-f.y;if(b<g.flakeHeight){f.active=0;if(g.snowStick){f.stick()}else{f.recycle()}}else{if(g.useMeltEffect&&f.active&&f.type<3&&!f.melting&&Math.random()>.998){f.melting=true;f.melt()}if(g.useTwinkleEffect){if(!f.twinkleFrame){if(Math.random()>.9){f.twinkleFrame=parseInt(Math.random()*20,10)}}else{f.twinkleFrame--;f.o.style.visibility=f.twinkleFrame&&f.twinkleFrame%2===0?"hidden":"visible"}}}};this.animate=function(){f.move()};this.setVelocities=function(){f.vX=s+c(g.vMaxX*.12,.1);f.vY=t+c(g.vMaxY*.12,.1)};this.setOpacity=function(a,b){if(!y){return false}a.style.opacity=b};this.melt=function(){if(!g.useMeltEffect||!f.melting){f.recycle()}else{if(f.meltFrame<f.meltFrameCount){f.meltFrame++;f.setOpacity(f.o,f.meltFrames[f.meltFrame]);f.o.style.fontSize=f.fontSize-f.fontSize*(f.meltFrame/f.meltFrameCount)+"px";f.o.style.lineHeight=g.flakeHeight+2+g.flakeHeight*.75*(f.meltFrame/f.meltFrameCount)+"px"}else{f.recycle()}}};this.recycle=function(){f.o.style.display="none";f.o.style.position=x?"fixed":"absolute";f.o.style.bottom="auto";f.setVelocities();f.vCheck();f.meltFrame=0;f.melting=false;f.setOpacity(f.o,1);f.o.style.padding="0px";f.o.style.margin="0px";f.o.style.fontSize=f.fontSize+"px";f.o.style.lineHeight=g.flakeHeight+2+"px";f.o.style.textAlign="center";f.o.style.verticalAlign="baseline";f.x=parseInt(c(o-g.flakeWidth-20),10);f.y=parseInt(c(q)*-1,10)-g.flakeHeight;f.refresh();f.o.style.display="block";f.active=1};this.recycle();this.refresh()};this.snow=function(){var a=0;var b=0;var d=0;var e=null;for(var g=f.flakes.length;g--;){if(f.flakes[g].active==1){f.flakes[g].move();a++}else if(f.flakes[g].active===0){b++}else{d++}if(f.flakes[g].melting){f.flakes[g].melt()}}if(a<f.flakesMaxActive){e=f.flakes[parseInt(c(f.flakes.length),10)];if(e.active===0){e.melting=true}}};this.mouseMove=function(a){if(!f.followMouse){return true}var b=parseInt(a.clientX,10);if(b<p){u=-v+b/p*v}else{b-=p;u=b/p*v}};this.createSnow=function(a,b){for(var d=0;d<a;d++){f.flakes[f.flakes.length]=new f.SnowFlake(f,parseInt(c(w),10));if(b||d>f.flakesMaxActive){f.flakes[f.flakes.length-1].active=-1}}g.targetElement.appendChild(z)};this.timerInit=function(){f.timers=!k?[setInterval(f.snow,f.animationInterval)]:[setInterval(f.snow,f.animationInterval*3),setInterval(f.snow,f.animationInterval)]};this.init=function(){f.randomizeWind();f.createSnow(f.flakesMax);d(window,"resize",f.resizeHandler);d(window,"scroll",f.scrollHandler);if(!j){d(window,"blur",f.freeze);d(window,"focus",f.resume)}f.resizeHandler();f.scrollHandler();if(f.followMouse){d(document,"mousemove",f.mouseMove)}f.animationInterval=Math.max(20,f.animationInterval);f.timerInit()};var B=false;this.start=function(a){if(!B){B=true}else if(a){return true}if(typeof f.targetElement=="string"){var b=f.targetElement;f.targetElement=document.getElementById(b);if(!f.targetElement){throw new Error('Snowstorm: Unable to get targetElement "'+b+'"')}}if(!f.targetElement){f.targetElement=!h?document.documentElement?document.documentElement:document.body:document.body}if(f.targetElement!=document.documentElement&&f.targetElement!=document.body){f.resizeHandler=f.resizeHandlerAlt}f.resizeHandler();f.usePositionFixed=f.usePositionFixed&&!n;x=f.usePositionFixed;if(o&&q&&!f.disabled){f.init();f.active=true}};if(document.addEventListener){document.addEventListener("DOMContentLoaded",a,false);window.addEventListener("load",a,false)}else{d(window,"load",a)}}var snowStorm=null;snowStorm=new SnowStorm